{% extends "base.html" %}

{% block content %}

    <section>
        <!-- flash messages-->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="row flashes">
                        <h4 class="center-align custom-flash {{ category}}">{{ message }}</h4>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </section>  

     <main class="container">
        <!-- Page Title -->
        <h3 class="center-align page-heading">
            {{username}}'s profile
        </h3>
    
        <ul class="collapsible all-accordion">
            {% for recipe in recipes %}
            <li>
                <div class="collapsible-header accordion-head valign-wrapper">
                    <div class="col s1 caret-icon">
                        <i class="fas fa-angle-down"></i>
                    </div>
                    <div class="col s2">
                        <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="edit-btn">Edit</a>
                        <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="delete-btn">Delete</a>
                    </div>
                    <div class="col s9 accord-title">
                        {{ recipe.recipe_title }}
                    </div>
                </div>
                <div class="collapsible-body">
                    <h6 ><a class="cta-recipe" href="{{ url_for('get_recipe', recipe_id=recipe._id) }}">Go to recipe</a></h6>
                    <h6>{{ recipe.category_name }}</h6>
                    <p class="accord-desc">{{ recipe.recipe_description }}</p>
                    {% if recipe.is_vegetarian == "on" %}
                        <i class="fab fa-vimeo-v"></i>
                    {% endif %}
                    {% if recipe.is_gluten_free == "on" %}
                        <i class="fab fa-glide-g"></i>
                    {% endif %}
                    <p>Date added: {{ recipe.date_added }}</p>
                    
                </div>
            </li>
            {% endfor %}
        </ul>
    </main>


{% endblock %}